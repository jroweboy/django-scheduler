{% extends "schedule/base.html" %}
{% load i18n %}
{% load scheduletags i18n %}

{% block extra_head %}
{{ block.super }}
<script>



$(document).ready(function() {

    // page is now ready, initialize the calendar...

    $('#calendar').fullCalendar({
        header : {
            left : 'today prev,next',
            center : 'title',
            right : 'month,agendaWeek,agendaDay'
        },
        slotMinutes : 15,
        minTime : 8,
        maxTime : 22,
        height : 650,
        defaultView : 'agendaWeek',
        allDayDefault: false,

        eventSources: [

        // your event source
        {
            url: '{% url "ajax_calendar" calendar.slug %}',
            type: 'GET',
            error: function(xhr, status, error) {
                var err = JSON.parse(xhr.responseText);
                alert('AJAX Error: ' + err);
            },
            color: 'blue',
            textColor: 'white'
        },

        // any other sources...
        ], 
   })

});

</script>

{% endblock %}

{% block body %}

<div id="calendar"></div>

{% endblock %}






{% comment %}

{% block body %}

<h1>Calendar metadata</h1>

<p>Name: {{calendar.name}}</p>
<p>Slug: {{calendar.slug}}</p>
<p>Event count: {{calendar.events.count}}</p>

<div>
    <p>See as:</p>
    <ul>
        <li><a href="{% url "compact_calendar" calendar.slug %}">{% trans "Small Month" %}</a></li>
        <li><a href="{% url "month_calendar" calendar.slug %}">{% trans "1 Month" %}</a></li>
        <li><a href="{% url "tri_month_calendar" calendar.slug %}">{% trans "3 Months" %}</a></li>
        <li><a href="{% url "year_calendar" calendar.slug %}">{% trans "This Year" %}</a></li>
        <li><a href="{% url "week_calendar" calendar.slug %}">{% trans "Weekly" %}</a></li>
        <li><a href="{% url "day_calendar" calendar.slug %}">{% trans "Daily" %}</a></li>
        <li><a href="/schedule/feed/calendar/upcoming/{{ calendar.id }}/">{% trans "Feed" %}</a></li>
    </ul>
</div>

<div><i>{% trans "Now see docstring for schedule.views.calendar" %}</i></div>

{% endblock %}

{% endcomment %}